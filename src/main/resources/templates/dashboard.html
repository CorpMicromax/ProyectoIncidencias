<!DOCTYPE html>
<div xmlns:th="http://www.thymeleaf.org">
    <!--/*@thymesVar id="data" type="com.micromax.incidencia.viewmodel.DashboardViewmodel"*/-->
    <div th:fragment="dashboard" th:object="${data}">
        <section class="dashboard-counts no-padding-bottom">
            <div class="container-fluid">
                <div class="row bg-white has-shadow">
                    <!-- Item -->
                    <div class="col-xl-2 col-sm-6">
                        <div class="item d-flex align-items-center">
                            <div class="icon bg-green"><i class="fa fa-star"></i></div>
                            <div class="title"><span>Nuevas<br>Incidencias</span>
                                <div class="progress">
                                    <div th:if="${nuevas > 0}" role="progressbar"
                                         th:style="'height:4px; width: '+${nuevas*100/todas} + 'px;'"
                                         th:aria-valuemin="0" th:attr="aria-valuemax=${todas}, aria-valuenow=${nuevas}"
                                         class="progress-bar bg-green"></div>
                                </div>
                            </div>
                            <div class="number"><strong th:text="*{nuevas}"></strong></div>
                        </div>
                    </div>
                    <!-- Item -->
                    <div class="col-xl-2 col-sm-6">
                        <div class="item d-flex align-items-center">
                            <div class="icon bg-violet"><i class="fa fa-user"></i></div>
                            <div class="title"><span>Incidencias<br>Asignadas</span>
                                <div class="progress">
                                    <div th:if="${todas > 0}" role="progressbar"
                                         th:style="'height:4px; width: '+${asignadas*100/todas} + 'px;'"
                                         th:aria-valuemin="0"
                                         th:attr="aria-valuemax=${todas}, aria-valuenow=${asignadas}"
                                         class="progress-bar bg-violet"></div>
                                </div>
                            </div>
                            <div class="number"><strong th:text="${asignadas}"></strong></div>
                        </div>
                    </div>
                    <!-- Item -->
                    <div class="col-xl-2 col-sm-6">
                        <div class="item d-flex align-items-center">
                            <div class="icon bg-orange"><i class="fa fa-gear"></i></div>
                            <div class="title"><span>Incidencias<br>En Progreso</span>
                                <div class="progress">
                                    <div th:if="${data.todas > 0}" role="progressbar"
                                         th:style="'height:4px; width: '+${data.progreso*100/data.todas} + 'px;'"
                                         th:aria-valuemin="0"
                                         th:attr="aria-valuemax=${todas}, aria-valuenow=${progreso}"
                                         class="progress-bar bg-orange"></div>
                                </div>
                            </div>
                            <div class="number"><strong th:text="${progreso}"></strong></div>
                        </div>
                    </div>
                    <!-- Item -->
                    <div class="col-xl-2 col-sm-6">
                        <div class="item d-flex align-items-center">
                            <div class="icon bg-blue"><i class="fa fa-check"></i></div>
                            <div class="title"><span>Incidencias<br>Cerradas</span>
                                <div class="progress">
                                    <div th:if="${todas > 0}" class="progress-bar bg-blue"
                                         th:style="'height:4px; width: '+${cerradas*100/todas} + 'px;'"
                                         role="progressbar"
                                         th:attr="aria-valuenow=${cerradas}, aria-valuemin='0', aria-valuemax=${todas}">
                                    </div>
                                </div>
                            </div>
                            <div class="number"><strong th:text="${cerradas}"></strong></div>
                        </div>
                    </div>
                    <!-- Item -->
                    <div class="col-xl-2 col-sm-6">
                        <div class="item d-flex align-items-center">
                            <div class="icon bg-red"><i class="fa fa-warning"></i></div>
                            <div class="title"><span>Incidencias<br>Retrasadas</span>
                                <div class="progress">
                                    <div th:if="${todas > 0}" role="progressbar"
                                         th:style="'height:4px; width: '+${todas*100/todas} + 'px;'"
                                         th:aria-valuemin="0" th:attr="aria-valuemax=${todas}, aria-valuenow=50"
                                         class="progress-bar bg-red"></div>
                                </div>
                            </div>
                            <div class="number"><strong>12</strong></div>
                        </div>
                    </div>
                    <!-- Item -->
                    <div class="col-xl-2 col-sm-6">
                        <div class="item d-flex align-items-center">
                            <div class="icon bg-gray"><i class="fa fa-bug"></i></div>
                            <div class="title"><span>Incidencias<br>Reabiertas</span>
                                <div class="progress">
                                    <div th:if="${todas > 0}" role="progressbar"
                                         th:style="'height:4px; width: '+${reabiertas*100/data.todas} + 'px;'"
                                         aria-valuemin="0" th:attr="aria-valuemax=${todas}, aria-valuenow=${reabiertas}"
                                         class="progress-bar bg-gray"></div>
                                </div>
                            </div>
                            <div class="number"><strong th:text="${reabiertas}"></strong></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <div class="row">
            <section class="col-lg-6">
                <div class="container-fluid">
                    <div class="card">
                        <div class="card-header ">Mis incidencias</div>
                        <div class="card-body table-responsive">
                            <table id="datatable"
                                   class="table table-hover dt-bootstrap table-striped table-bordered nowrap">
                                <thead>
                                <tr>
                                    <th> Id</th>
                                    <th> Titulo</th>
                                    <th> Categoria</th>
                                    <th> Fecha y Hora de Creacion</th>
                                    <th> Status</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:if="${data.incidencias.empty}">
                                    <td colspan="2"> No tiene incidencias</td>
                                </tr>
                                <tr th:each="incidencia: ${data.incidencias}">
                                    <td><a class="text-info" th:href="@{'/incidenciaV/' + ${incidencia.idIncidencia}}">
                                        <i class="fa fa-link"></i><span th:text="${incidencia.idIncidencia}"> Id </span></a>
                                    </td>
                                    <td><span th:if="${incidencia.titulo}"
                                              th:text="${incidencia.titulo}"> Titulo </span>
                                    </td>
                                    <td><span th:if="${incidencia.categoria}"
                                              th:text="${incidencia.categoria.nombre}"></span>
                                    </td>
                                    <td><span th:if="${incidencia.creacion}"
                                              th:text="${incidencia.creacion.toLocaleString()}"> creacion </span>
                                    </td>
                                    <td><span th:if="${incidencia.status}"
                                              th:text="${incidencia.status}"> Status </span>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </section>
            <section class="col-lg-6">
                <div class="container-fluid">
                    <div class="card">
                        <div class="card-header ">Incidencias en el tiempo</div>
                        <div class="card-body ">
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>